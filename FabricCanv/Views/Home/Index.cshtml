@{
    ViewBag.Title = "Home Page";
}

@Scripts.Render("~/bundles/canvas")


<h2>Sender Canvas</h2>


<div id="canvasContainer">
    <canvas id="myCanvas" height="450" width="650"></canvas>
</div>
@*<p id="demo">Click me to load.</p>*@
<button id="demo2">JSON sender.</button>



@section Scripts {
    @Scripts.Render("~/bundles/canvas") @*For unobtrusive-ajax*@
    @Scripts.Render("~/bundles/fabric") @*For validate and validate-unobtrusive*@


<script type="text/javascript">

    var canvas = new fabric.Canvas('myCanvas');

    // create a rectangle with angle=45
    var rect = new fabric.Rect({
        left: 100,
        top: 100,
        fill: 'red',
        width: 20,
        height: 20,
        angle: 45
    });
    canvas.add(rect);


    canvas.renderAll();
         
</script>

@*<script>
document.getElementById("demo").onclick = function() {myFunction2()};

function myFunction2() {
    canvas.loadFromJSON(jsonstate, canvas.renderAll.bind(canvas));
}
</script>*@




<script>
document.getElementById("demo2").onclick = function() {myFunction()};

function myFunction() {
    var jsonstate = canvas.toJSON();

    canvas.clear();
    document.getElementById("demo2").innerHTML ="Transfer complete";
    console.log(11);
    var rect2 = new fabric.Rect({
        left: 100,
        top: 100,
        fill: 'red',
        width: 20,
        height: 20,
        angle: 45
    });
    var canvas2 = new fabric.Canvas('myCanvas2');

    canvas2.loadFromJSON(jsonstate, canvas2.renderAll.bind(canvas2));
    canvas.add(rect2);

}
</script>


    }